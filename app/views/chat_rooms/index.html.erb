<div id="message_board_container" class="container-fluid">
    <div class="row">

        <%# private conversations %>
        <div id="private_convo">
            <h4><%= link_to "your private conversations", private_chat_rooms_path %></h4>

            <div class="">
                <h5>Requests</h5>
                <table>
                    <% @connections.each do |connection| %>
                    <tr>
                        <% name = User.find(connection.user_id).username %>
                        <td><%= name %></td>
                            <td><%= bootstrap_form_for(connection) do |f| %>
                                <%= f.select :state, ["accept", "reject"] %>
                                <%= f.hidden_field :user_id, :value => connection.user_id %>
                                <%= f.hidden_field :other_user_id, :value => current_user.id %>
                                <%= f.submit "Submit" %>
                            <% end %>
                        </td>
                    </tr>
                    <% end %>
                </table>
            </div>

            <h5>Requested</h5>
            <table>
                <% @requests.each do |request| %>
                <tr>
                    <% name = User.find(request.other_user_id).username %>
                    <td><%= name %></td>
                    <td><%= request.state %></td>
                </tr>
                <% end %>
            </table>
            

            <div id="connect">
                <h3>Start a conversation</h3>
                <%= form_for(@connection_request) do |f| %>
                    <%= f.label "who would you like to chat with?" %>
                    <%= f.collection_select :other_user_id, @users, :id, :username, prompt: true %>
                    <%= f.hidden_field :user_id, :value => current_user.id %>
                    <%= f.hidden_field :state, :value => "pending" %>
                    <%= f.submit "invite", :class => "invite_btn btn btn-sm btn-warning"  %>
                <% end %>
            </div>
        </div>

        <%# message board %>
        <div id="message_board">
            <h1>Hello <%= current_user.first_name %>, Join The Conversation</h1>

            <%= form_for @chat_room do |f| %>
                <div class="form-group">
                    <%= f.text_field :title, autofocus: true, class: 'ask form-control', id: "question_input", placeholder: "what's your question" %>
                </div>

                <%= f.submit "ask the MentorMe community", class: 'ask-btn btn btn-primary' %>
            <% end %>

            <div id="questions_list">
                <table>
                    <tbody>
                        <%= render @chat_rooms %>
                    </tbody>
                </table>
            </div>

            
        </div>


    </div> <%# end Row %>
</div> <%# end Container-fluid %>
